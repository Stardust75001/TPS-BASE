{% liquid
  assign mt = block.settings.mt | prepend: 'mt-'
  assign mb = block.settings.mb | prepend: 'mb-'
%}

<div class="product-block-media {{ mt }} {{ mb }}" {{ block.shopify_attributes }}>
  {% unless block.settings.image == blank %}
    <div class="mb-4">
      <img
        class="img-fluid rounded w-100 img-thumbnail"
        src="{{ block.settings.image.src | image_url: width: 800 }}"
        alt="{{ block.settings.image.alt | escape }}"
        width="800"
        height="{{ 800 | divided_by: block.settings.image.aspect_ratio | round | default: 800 }}"
        loading="lazy"
      >
    </div>
  {% endunless %}

  {% unless block.settings.video == blank %}
    <div class="mb-3">
      {% assign video_class = 'img-thumbnail rounded w-100' %}
      {{
        block.settings.video
        | video_tag:
          class: video_class,
          image_size: '800x',
          autoplay: block.settings.autoplay,
          loop: block.settings.loop,
          muted: block.settings.muted,
          controls: block.settings.controls
      }}
    </div>
  {% endunless %}

  {% unless block.settings.external_video == blank %}
    <div class="ratio ratio-16x9 mb-3">
      <iframe
        data-src="https://www.youtube.com/embed/{{ block.settings.external_video.id }}"
        frameborder="0"
        allow="autoplay; encrypted-media; picture-in-picture"
        allowfullscreen
        class="external-video js-lazy-iframe rounded img-thumbnail"
        loading="lazy"
        title="External product video"
      ></iframe>
    </div>
  {% endunless %}
</div>
