{% comment %}
  Section : Image avec texte + boutons (responsive, image mobile dédiée, no-gap auto)
{% endcomment %}

{% liquid
  assign mt = section.settings.mt | prepend: 'mt-'
  assign mb = section.settings.mb | prepend: 'mb-'
  assign pt = section.settings.pt | prepend: 'pt-'
  assign pb = section.settings.pb | prepend: 'pb-'
  assign custom_class = section.settings.custom_class
%}

<section class="image-banner-wrapper custom-image-banner-class {{ custom_class }} {{ mt }} {{ mb }} {{ pt }} {{ pb }}">
  {% if section.settings.image != blank or section.settings.image_mobile != blank %}
    <picture>
      {% if section.settings.image_mobile != blank %}
        <source media="(max-width: 768px)" srcset="{{ section.settings.image_mobile | image_url: width: 800 }}">
      {% endif %}
      <img
        src="{{ section.settings.image | image_url: width: 1920 }}"
        alt="{{ section.settings.alt_key | t }}"
        loading="lazy"
        class="image-banner-img"
      >
    </picture>
  {% endif %}

  <div class="image-banner-overlay">
    {% if section.settings.heading_key != blank %}
      <h2 class="image-banner-title">{{ section.settings.heading_key | t }}</h2>
    {% endif %}
    {% if section.settings.text != blank %}
      <p class="image-banner-text">{{ section.settings.text }}</p>
    {% endif %}
    <div class="image-banner-buttons">
      {% if section.settings.button_label != blank and section.settings.button_link != blank %}
        <a href="{{ section.settings.button_link }}" class="btn btn-primary">
          {{ section.settings.button_label }}
        </a>
      {% endif %}
      {% if section.settings.button_label_2 != blank and section.settings.button_link_2 != blank %}
        <a href="{{ section.settings.button_link_2 }}" class="btn btn-secondary">
          {{ section.settings.button_label_2 }}
        </a>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "t:sections.image_banner.name",
  "settings": [
    { "type": "image_picker", "id": "img_desktop", "label": "t:sections.shared.desktop_image" },
    { "type": "image_picker", "id": "img_mobile", "label": "t:sections.shared.mobile_image" },
    {
      "type": "text",
      "id": "alt_key",
      "label": "t:sections.shared.alt_key",
      "default": "custom_sections.image_banner.alt"
    },
    {
      "type": "text",
      "id": "heading_key",
      "label": "t:sections.shared.heading_key",
      "default": "custom_sections.image_banner.heading"
    },
    {
      "type": "text",
      "id": "text_key",
      "label": "t:sections.shared.text_key",
      "default": "custom_sections.image_banner.text"
    },
    {
      "type": "text",
      "id": "btn_label_key",
      "label": "t:sections.shared.btn_label_key",
      "default": "custom_sections.image_banner.button"
    },
    { "type": "url", "id": "button_link", "label": "t:sections.shared.button_link" }
  ],
  "presets": [{ "name": "t:sections.image_banner.preset_name" }]
}
{% endschema %}
