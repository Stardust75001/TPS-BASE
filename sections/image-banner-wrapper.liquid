{% comment %} Image Banner Wrapper â€“ LCP & i18n ready {% endcomment %}
{%- assign hero_img_desktop = section.settings.img_desktop -%}
{%- assign hero_img_mobile = section.settings.img_mobile -%}
{%- assign hero_img = hero_img_desktop | default: hero_img_mobile -%}

{%- if hero_img != blank -%}
  <link
    rel="preload"
    as="image"
    href="{{ hero_img | image_url: width: 1600 }}"
    imagesrcset="
      {{ hero_img | image_url: width: 800 }} 800w,
      {{ hero_img | image_url: width: 1200 }} 1200w,
      {{ hero_img | image_url: width: 1600 }} 1600w
    "
    imagesizes="100vw"
  >
{%- endif -%}

<section class="image-banner-wrapper">
  <picture>
    {% if hero_img_mobile != blank %}
      <source
        media="(max-width: 767px)"
        srcset="{{ hero_img_mobile | image_url: width: 800 }} 800w, {{ hero_img_mobile | image_url: width: 1200 }} 1200w"
        sizes="100vw"
      >
    {% endif %}
    {% if hero_img_desktop != blank %}
      <source
        media="(min-width: 768px)"
        srcset="{{ hero_img_desktop | image_url: width: 1200 }} 1200w, {{ hero_img_desktop | image_url: width: 1600 }} 1600w"
        sizes="100vw"
      >
    {% endif %}
    <img
      src="{{ hero_img | image_url: width: 1200 }}"
      srcset="
        {{ hero_img | image_url: width: 800 }} 800w,
        {{ hero_img | image_url: width: 1200 }} 1200w,
        {{ hero_img | image_url: width: 1600 }} 1600w
      "
      sizes="100vw"
      alt="{{ section.settings.alt_key | t }}"
      width="1600"
      height="900"
      fetchpriority="high"
      decoding="sync"
      importance="high"
      class="hero-banner-img"
    >
  </picture>

  {% if section.settings.heading_key or section.settings.text_key or section.settings.btn_label_key %}
    <div class="banner-overlay">
      {% if section.settings.heading_key %}
        <h1>{{ section.settings.heading_key | t }}</h1>
      {% endif %}
      {% if section.settings.text_key %}
        <p>{{ section.settings.text_key | t }}</p>
      {% endif %}
      {% if section.settings.btn_label_key and section.settings.button_link %}
        <a href="{{ section.settings.button_link }}" class="btn">{{ section.settings.btn_label_key | t }}</a>
      {% endif %}
    </div>
  {% endif %}
</section>

{% schema %}
{
  "name": "t:sections.image_banner.name",
  "settings": [
    { "type": "image_picker", "id": "img_desktop", "label": "t:sections.shared.desktop_image" },
    { "type": "image_picker", "id": "img_mobile", "label": "t:sections.shared.mobile_image" },

    {
      "type": "text",
      "id": "alt_key",
      "label": "t:sections.shared.alt_key",
      "default": "custom_sections.image_banner.alt"
    },
    {
      "type": "text",
      "id": "heading_key",
      "label": "t:sections.shared.heading_key",
      "default": "custom_sections.image_banner.heading"
    },
    {
      "type": "text",
      "id": "text_key",
      "label": "t:sections.shared.text_key",
      "default": "custom_sections.image_banner.text"
    },
    {
      "type": "text",
      "id": "btn_label_key",
      "label": "t:sections.shared.btn_label_key",
      "default": "custom_sections.image_banner.button"
    },
    { "type": "url", "id": "button_link", "label": "t:sections.shared.button_link" }
  ],
  "presets": [{ "name": "t:sections.image_banner.preset_name" }]
}
{% endschema %}
